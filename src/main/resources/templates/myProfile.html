<<<<<<< HEAD

<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="utf-8">
    <title>Wayne State Blood Bank</title>
    <link rel="stylesheet" href="design.css" media="screen">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.10/semantic.min.css">
</head>


<div class="header">
    <div class="ui green clearing inverted segment">
        <!--See modal section of semantic, click on login to popup the username and pw prompt-->
        <!--signup will be a button next to login that turns into a signout after a user is logged in-->

        <div class="ui right floated header">
            <button class="ui red button" id="loginButton" onclick="openLoginModal()">SignUp/Login</button>
            <!--show after logged in-->
            <a href="/logout">
              <button class="ui red button" id="logoutButton">Logout</button>
            </a>
        </div>
        <h3 class="ui left floated huge red header">
            Red Cross Warriors
        </h3>
    </div>
</div>

<!--sign in start may need to get rid of this too sadly-->
<div class="ui modal">
    <i class="close icon"></i>
    <div class="content">
        <div class="ui placeholder segment">
            <div class="ui two column very relaxed stackable grid">
                <div class="column">
                    <form class="ui form" method="post">
                        <div class="field">
                            <label>E-mail</label>
                            <div class="ui left icon input">
                                <input type="text"  name="username" placeholder="email" id="un"/>
                                <i class="user icon"></i>
                            </div>
                        </div>
                        <div class="field">
                            <label>Password</label>
                            <div class="ui left icon input">
                                <input type="password" placeholder="password" name="password" id="pw"/>
                                <i class="lock icon"></i>
                            </div>
                        </div>

                        <input type="submit"/>
                    </form>
                </div>
                <div class="middle aligned column">
                    <div class="ui header">Don't have an account?<br>
                        <a href="/signup.html">
                        <div class="ui big button">
                            <i class="signup icon"></i>
                            Sign Up
                        </div>
                        </a>
                    </div>
                </div>
            </div>

        </div>
    </div>


    <!--Will need to get rid of this-->
    <!--Sign in end-->

</div>
<!--jquery should be above semantic because of dependencies-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.10/semantic.min.js"></script>
<script src="webpageFun.js"></script>
<nav>
    <!--whatever pages we want-->
    <div class="ui attached stackable menu">
        <!--how to make this fully left l-->
        <div class="ui container">
            <a class="item" onclick="location.href='index.html'">
                <i class="home icon" id="homeButton"></i> Home
            </a>
            <a class="item">
                <i class="grid layout icon"></i> Page 2
            </a>
            <a class="item">
                <i class="mail icon"></i> Page 3
            </a>
            <!--how to lock this behind login-->
            <div class="ui simple dropdown item">
                More
                <i class="dropdown icon"></i>
                <div class="menu">
                    <a class="item" onclick="location.href='myProfile.html'"> My Profile</a>
                    <a class="item"> Send Request?</a>
                    <a class="item">Account Settings</a>
                </div>
            </div>
        </div>
    </div>

</nav>

<body>
<div class="ui fluid container">
    <div class="content">
        <div class="transparent-bg">
            <img src="Blood-Donation.jpg" id="bdimg" style="width:100%;">
        </div>
        <div class="ui container">
            <div class="centered">
              <div class="mainContainer" id="mainContainer" style="display: block">
			  <div class="ui placeholder segment" id="fogCover" style="background: rgba(0,0,0,.7); max-width: 1200px; max-height: 500px; overflow-y: auto;">
                <h1 style="font-size:4vw;">Your Profile</h1>
                <p style="font-size:2vw;">Make sure the information below is correct, if not fill out the input boxes where changes are neccessary</p>
				
				
				
<!--Form that displays user info-->
<form class="ui form">
  <div class="field">
    <label1>First Name</label1>
    <input type="text" id ="firstname" name="first-name" placeholder = document.getElementById("myFName").value>
 
    <label1>Last Name</label1>
    <input type="text" id = "lastname" name="last-name" placeholder="Last Name">
  
  
    <label1>Birthday</label1>
    <input type="date" id = "birthday" name="last-name" placeholder="Last Name">
 
    <label1>Email</label1>
    <input type="text" id = "email" name="last-name" placeholder="Last Name">
 
    <label1>Phone</label1>
    <input type="number" id = "phone" name="last-name" placeholder="Last Name">
 
    <label1>Blood Type</label1>
    <input type="text" id = "phone" name="last-name" placeholder="Last Name">
  </div>
  
  <button "ui button"id="editProfileButton"> Edit Profile </button> 
</form>
            </div>

        </div>

    </div>
 </div>
</div>



<script>


var getInfo = {
    firstName: "John",
    lastName: "Doe",
    phoneNumber: "1111111111",
    bloodDonorStatus: "Y",
    bloodType: "A+",
    birthDay: "0000-01-01",
    email: "example@wayne.edu"
};

displayInfo(getInfo); 

// place your code to display Info in this function 
function displayInfo(data){
	// you can remove this line and replace it with your code to display the information 
    // as place holders in the form. 
	
   $("#firstname").attr("placeholder", document.getElementById("myFName").value);
   $("#lastname").attr("placeholder", document.getElementById("myLName").value);
   $("#phoneNumber").attr("placeholder", document.getElementById("myPhone").value);
   $("#bloodType").attr("placeholder", document.getElementById("bloodType").value);
   $("#birthDay").attr("placeholder", document.getElementById("birthday").value);
   $("#email").attr("placeholder", document.getElementById("myEmail").value);
}


// don't worry about this method just make sure it can send the right information to the method from the form 
function sendEditProfileRequest(data){
	 alert(data.password); 
     alert(data.firstName); 
     alert(data.lastName);
     alert(data.phoneNumber);
     alert(data.bloodDonorStatus); 
}

$("#editProfileButton").click(function(){
// replace these values with the values in the form 
// if there is no password then set password to null 
// all other input for the object needs to be filled out
	var profileInfo = {
    	password: "Password1234", 
    	firstName: "John",
    	lastName: "Doe",
    	phoneNumber: "1111111111",
    	bloodDonorStatus: "Y"
	}
    
    sendEditProfileRequest(profileInfo); 
    
});




</script>
<script>
    loginCheck();
</script>
</body>

<div class="footer">

</div>
</html>
=======

<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="utf-8">
    <title>Wayne State Blood Bank</title>
    <link rel="stylesheet" href="./design.css" media="screen">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.10/semantic.min.css">
</head>
<body>
<div class="header">
    <div class="ui green clearing inverted segment">
        <!--See modal section of semantic, click on login to popup the username and pw prompt-->
        <!--signup will be a button next to login that turns into a signout after a user is logged in-->

        <div class="ui right floated header">
            <button class="ui red button" id="loginButton" onclick="openLoginModal()">SignUp/Login</button>
            <!--show after logged in-->
            <a href="/logout">
              <button class="ui red button" id="logoutButton">Logout</button>
            </a>
        </div>
        <h3 class="ui left floated huge red header">
            Red Cross Warriors
        </h3>
    </div>
</div>

<!--sign in start may need to get rid of this too sadly-->
<div class="ui modal">
    <i class="close icon"></i>
    <div class="content">
        <div class="ui placeholder inverted segment">
            <div class="ui two column very relaxed stackable grid">
                <div class="column">
                    <form class="ui form">
                        <div class="field">
                            <label>E-mail</label>
                            <div class="ui left icon input">
                                <input type="text"  name="username" placeholder="email" id="un"/>
                                <i class="user icon"></i>
                            </div>
                        </div>
                        <div class="field">
                            <label>Password</label>
                            <div class="ui left icon input">
                                <input type="password" placeholder="password" name="password" id="pw"/>
                                <i class="lock icon"></i>
                            </div>
                        </div>

                        <input type="submit"/>
                    </form>
                </div>
                <div class="middle aligned column">
                    <div class="ui header">Don't have an account?<br>
                        <a href="/signup.html">
                        <div class="ui big button">
                            <i class="signup icon"></i>
                            Sign Up
                        </div>
                        </a>
                    </div>
                </div>
            </div>

        </div>
    </div>


    <!--Will need to get rid of this-->
    <!--Sign in end-->

</div>
<!--jquery should be above semantic because of dependencies-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.10/semantic.min.js"></script>
<script src="./webpageFun.js"></script>
<nav>
    <!--whatever pages we want-->
    <div class="ui attached stackable menu">
        <!--how to make this fully left l-->
        <div class="ui container">
            <a class="item" onclick="location.href='index.html'">
                <i class="home icon" id="homeButton"></i> Home
            </a>
            <a class="item">
                <i class="grid layout icon"></i> Page 2
            </a>
            <a class="item">
                <i class="mail icon"></i> Page 3
            </a>
            <!--how to lock this behind login-->
            <div class="ui simple dropdown item">
                More
                <i class="dropdown icon"></i>
                <div class="menu">
                    <a class="item" href="/myProfile"> My Profile</a>
                </div>
            </div>
        </div>
    </div>
</nav>
<div class="ui fluid container">
    <div class="content">
        <div class="transparent-bg">
            <img src="./Blood-Donation.jpg" id="bdimg" style="width:100%;">
        </div>

        <div class="ui container">
            <div class="centered">
                <div id="successMessageContainer" class="ui positive message transition hidden">
                    <p id="successMessage">Success</p>
                </div>
                <div id="errorMessage" class="ui error message hidden">
                    <div class="header">Invalid Input please fix the following fields</div>
                    <ul id="errorList">
                    </ul>
                </div>
              <div class="mainContainer" id="mainContainer" style="display: block">
               
			  <div class="ui placeholder inverted segment" id="fogCover" style="background: rgba(0,0,0,.7); max-width: 1200px; max-height: 500px; overflow-y: auto;">
                <h1 style="font-size:4vw;">Your Profile</h1>
                <p style="font-size:2vw;">Make sure the information below is correct</p>
                
                <form class="ui huge inverted form">
                    <div class="field">
                        <label>First Name</label>
                        <input naem="firstName" type="text" id="firstName">
                    </div>
                    <div class=" field">
                        <label>Last Name</label>
                        <input type="text" id="lastName">
                    </div>
                    <div class="fields">
                        <label>Would you like to be a blood donor?</label>
                        <div class="field">
                            <div class="ui radio checkbox">
                                <label>Yes</label>
                                <input id="bloodDonorYes" type="radio" name="bloodDonorStatus" value="Y">
                            </div>
                        </div>
                        <div class="field">
                            <div class="ui radio checkbox">
                                <label>No</label>
                                <input id="bloodDonorNo" type="radio" name="bloodDonorStatus" value="N">
                            </div>
                        </div>
                    </div>
                    <div class=" field">
                        <label>Phone Number</label>
                        <input type="tel" id="phoneNumber">
                    </div>
                    <div class="field disabled">
                        <label>Blood Type</label>
                        <input id="bloodType" type="text" readonly >
                    </div>
                    <div class="field disabled">
                        <label>Birth Day</label>
                        <input id="birthDay" type="text" readonly>
                    </div>
                    <div class="field disabled">
                        <label>Email</label>
                        <input id="email" type="text" readonly>
                    </div>
                    <div class="field">
                        <label>Password</label>
                        <input id="password" type="password">  
                    </div>
                </form>
                <br>
                <button id="editProfileButton" class="ui button primary">Edit Profile</button>
                <button id="deleteProfileButton" class="ui button red">Delete Profile</button>
                
              </div>
            </div>
        </div>

    </div>
 </div>
</div>
<script>
    $('.ui.checkbox')
  .checkbox()
;

function displayInfo(data){
    $("#firstName").val(data.firstName);
    $("#lastName").val(data.lastName);
    $("#phoneNumber").val(data.phoneNumber);
    $("#bloodType").val(data.bloodType);
    $("#birthDay").val(data.birthDay);
    $("#email").val(data.email);
    if(data.bloodDonorStatus == "Y"){
        $("#bloodDonorYes").attr("checked", "checked");
    }
    else{
        $("#bloodDonorNo").attr("checked","checked");
    }
}

function getEditProfileData(){ 
    let password = $("#password").val();
    if(password == ""){
        password = null;
    }
    return {
        firstName: $("#firstName").val(),
        lastName: $("#lastName").val(),
        phoneNumber: $("#phoneNumber").val(),
        bloodDonorStatus: $('input[name="bloodDonorStatus"]:checked').val(),
        password: password
    };
}


function displayErrors(data){
    $("#errorList").empty();
    if(data.status == 400){
        displayBadRequestErrors(data.errors);
    }
    else{
        displayOtherErrors(data.message);
    }
}

function displayBadRequestErrors(errors){
    var index; 
    for(index in errors){
        let error = errors[index];
        let errorElement =  "<li>";
        errorElement += "Error: ";
        errorElement += error.error; 
        errorElement +=" </li>";
        $("#errorList").append(errorElement);
    }
    $("#errorMessage").removeClass("hidden");
}

function displayOtherErrors(message){
    $("#errorMessage").removeClass("hidden");
    $("#errorList").append("<li> " + message + " </li>");
}

$("#editProfileButton").click(function(){
    $.ajax(
        {
            type:"PUT",
            url: "/profile",
            data: JSON.stringify(getEditProfileData()),
            contentType: "application/json",
            success: function(data){
                displaySuccess(data.message);
            }
        }
    ).fail(function(xhr, status, errorThrown){
        displayErrors(xhr.responseJSON);
    });
});

$("#deleteProfileButton").click(function(){
    var confirmed = confirm("Deleting your profile is permanent are you sure you want to delete your profile?");
    if(confirmed == true){
        $.ajax(
        {
            type:"DELETE",
            url: "/profile",
            data: JSON.stringify(getEditProfileData()),
            contentType: "application/json",
            success: function(data){
                displaySuccess(data.message);
            }
        }
        ).fail(function(xhr, status, errorThrown){
            displayErrors(xhr.responseJSON);
        });
    }
});

function displaySuccess(message){
    $("#mainContainer").hide();
    $("#successMessageContainer").removeClass("hidden");
    $("#successMessage").val(message);
    $("#errorMessage").hide();
}

$(document).ready(function(){
    $.ajax(
        {
            type:"GET",
            dataType: "JSON",
            url:"/profile",
            success: function(data){
                displayInfo(data);
            }
        }
    ).fail(function(xhr, status, errorThrown){
        displayErrors(xhr.responseJSON);
    });    
});

</script>
<div class="footer">
</div>
</body>
</html>
>>>>>>> a1ebf0d2a87e213127bcb222dd66a6784878e3db
