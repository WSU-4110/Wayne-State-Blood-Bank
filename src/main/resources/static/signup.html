<!DOCTYPE html>

<!--Copied from Kyle-->
<html lang="en" dir="ltr">
<head>
    <meta charset="utf-8">
    <title>Wayne State Blood Bank</title>
    <link rel="stylesheet" href="design.css" media="screen">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.10/semantic.min.css">
</head>

<div class="header">
    <div class="ui green clearing inverted segment">
        <!--See modal section of semantic, click on login to popup the username and pw prompt-->
        <!--signup will be a button next to login that turns into a signout after a user is logged in-->

        <div class="ui right floated header">
            <button class="ui red button" onclick="openLoginModal()">SignUp/Login</button>
            <!--show after logged in-->
            <a href="/logout">
              <button class="ui red button" onclick="loginCheck()" id="logoutButton">Logout</button>
            </a>
        </div>
        <h3 class="ui left floated huge red header">
            Red Cross Warriors
        </h3>
    </div>
</div>


<!--Nav Code-->
<!--jquery should be above semantic because of dependencies-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.10/semantic.min.js"></script>
<script src="webpageFun.js"></script>
<nav>
    <!--whatever pages we want-->
    <div class="ui attached stackable menu">
        <!--how to make this fully left l-->
        <div class="ui container">
            <a class="item" onclick="location.href='index.html'">
                <i class="home icon" id="homeButton"></i> Home
            </a>
            <a class="item">
                <i class="grid layout icon"></i> Page 2
            </a>
            <a class="item">
                <i class="mail icon"></i> Page 3
            </a>
            <!--how to lock this behind login-->
            <div class="ui simple dropdown item">
                More
                <i class="dropdown icon"></i>
                <div class="menu">
                    <a class="item"> Edit Profile</a>
                    <a class="item"> Send Request?</a>
                    <a class="item">Account Settings</a>
                </div>
            </div>
        </div>
    </div>

</nav>

<div id="mySubmit">
</div>

<main>
<body>
<h3>Register</h3>

<p>Thank you for signing up with us, please fill out the information below.</p>

<!--User input-->
<form 
 method="post" 
 onsubmit="return checkForm(this)">

   <label for="myFName">*First Name:</label>
   <input type="text" name="myFName" id="myFName"
    required = "required"> 
	<br><br>

   <label for="myLName">*Last Name:</label>
   <input type="text" name="myLName" id="myLName"
   required = "required">
   <br><br>

   <label for="birthday">*Birthday</label>  
   <input    type="date" name="myDate" id="myDate">
   <br><br>

   <label for="myEmail">*E-Mail:</label>
   <input type="email" name="myEmail" id="myEmail"
   required = "required">
   <br><br>

   <label for="myPhone">Phone:</label>
   <input type="tel" name="myPhone" id="myPhone">
   <br><br>
   
	<label>Blood Type:</label>
    <select name="myBlood">
      <option value="A">A</option>
      <option value="B">B</option>
      <option value="O">O</option>
	  <option value="AB">AB</option>
	  <option value="U">Unknown</option>
    </select> 
    <br><br>
	
	<label for="username">*Enter a Username:</label>
   <input type="text" name="username" id="username"
    required = "required"> 
	<br><br>
	
	<label>Enter your new password: </label>
    <input type="password" name="pwd1" placeholder="password">
    <br><br>

  <label>Confirm your Password: </label>
  <input type="password" name= "pwd2" placeholder="re-enter password">
  <br><br>

   <input id="mySubmit" type="submit" value="Submit">
   <input type="reset" value="Reset" class="formButton">

</form>

</main>


<!--
<script>
window.onbeforeunload = function() 
{
return "Leaving the page, your inputs will not be saved";};
</script>
-->


<!--Functions for validation-->
<script>
function checkForm(form)
{
  if(form.username.value == "") {
    alert("Error: Username cannot be blank!");
    form.username.focus();
    return false;
  }
  re = /^\w+$/;
  if(!re.test(form.username.value)) {
    alert("Error: Username must contain only letters, numbers and underscores!");
    form.username.focus();
    return false;
  }

  if(form.pwd1.value != "" && form.pwd1.value == form.pwd2.value) {
    if(form.pwd1.value.length < 6) {
      alert("Error: Password must contain at least six characters!");
      form.pwd1.focus();
      return false;
    }
    if(form.pwd1.value == form.username.value) {
      alert("Error: Password must be different from Username!");
      form.pwd1.focus();
      return false;
    }
    re = /[0-9]/;
    if(!re.test(form.pwd1.value)) {
      alert("Error: password must contain at least one number (0-9)!");
      form.pwd1.focus();
      return false;
    }
    re = /[a-z]/;
    if(!re.test(form.pwd1.value)) {
      alert("Error: password must contain at least one lowercase letter (a-z)!");
      form.pwd1.focus();
      return false;
    }
    re = /[A-Z]/;
    if(!re.test(form.pwd1.value)) {
      alert("Error: password must contain at least one uppercase letter (A-Z)!");
      form.pwd1.focus();
      return false;
    }
  } else {
    alert("Error: Passwords do not match!");
    form.pwd1.focus();
    return false;
  }

  alert("You entered a valid password: " + form.pwd1.value);
  return true;


/*JSON conversion
function sendJSON(){
  
  let result = document.querySelector('.result'); 
    let fname = document.querySelector('#myFName');
	let lname = document.querySelector('#myLName');
	let bday = document.querySelector('#myDate');
	let email = document.querySelector('#myEmail');
	let phone = document.querySelector('#myPhone');
	let bloodType = document.querySelector('#myBlood');
    let username = document.querySelector('#myEmail'); 
	let password = document.querySelector('#pwd1');
	
         
      // Creating a XHR object 
      let xhr = new XMLHttpRequest(); 
      let url = "C:\Users\Khang\Documents\GitHub\Wayne-State-Blood-Bank\src\main\resources\static\submit.php"; 
     
      // open a connection 
      xhr.open("POST", url, true); 
  
      // Set the request header i.e. which type of content you are sending 
      xhr.setRequestHeader("Content-Type", "application/json"); 
  
      // Create a state change callback 
      xhr.onreadystatechange = function () { 
          if (xhr.readyState === 4 && xhr.status === 200) { 
  
              // Print received data from server 
              result.innerHTML = this.responseText; 
  
          } 
      }; 
  
      // Converting JSON data to string 
      var data = JSON.stringify({ 
	  "fname": form.myFName.value, : 
	  "lname": form.myLName.value,
	  "bday": form.myDate.value, 
	  "email": form.myEmail.value,
	  "phone": form.myPhone.value,
	  "bloodType": form.myBlood.value,
	  "username": form.username.value,
	  "password": form.pwd1.value });
  
      // Sending data with the request 
      xhr.send(data); 
      

*/
}

</script>

<footer>
Copyright &copy; Red Cross Warriors<br>
<!--<a href="mailto:">whateverouremailis.com</>-->
</footer>
</div>
</body>
</html>
