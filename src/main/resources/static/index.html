<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wayne State Blood Bank</title>
    <link rel="stylesheet" href="design.css" media="screen">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.10/semantic.min.css">
</head>
<body style="background: #21ba45">

<div class="header">
    <div class="ui green clearing inverted segment">
        <!--See modal section of semantic, click on login to popup the username and pw prompt-->
        <!--signup will be a button next to login that turns into a signout after a user is logged in-->

        <div class="ui right floated header">
            <button class="ui left floated button" id="manageUsersNavButton" style="display: none;"
                    onclick="location.href='/manageUsers'">Manage Users
            </button>
            <button class="ui red button" id="loginButton" onclick="openLoginModal()">SignUp/Login</button>
            <!--show after logged in-->
            <a href="/logout">
                <button class="ui red button" id="logoutButton">Logout</button>
            </a>
        </div>
        <a href="/index.html">
            <h3 class="ui left floated huge red header">
                Red Cross Warriors
            </h3>
        </a>
    </div>
</div>

<!--sign in start may need to get rid of this too sadly-->
<div class="ui modal">
    <i class="close icon"></i>
    <div class="content">
        <div class="ui placeholder segment">
            <div class="ui two column very relaxed stackable grid">
                <div class="column">
                    <form class="ui form" method="post" action="/">
                        <div class="field">
                            <label style="text-align: left;">E-mail</label>
                            <div class="ui left icon input">
                                <input type="text" name="username" placeholder="email" id="un"/>
                                <i class="user icon"></i>
                            </div>
                        </div>
                        <div class="field">
                            <label style="text-align: left;">Password</label>
                            <div class="ui left icon input">
                                <input type="password" placeholder="password" name="password" id="pw"/>
                                <i class="lock icon"></i>
                            </div>
                        </div>

                        <input type="submit"/>
                    </form>
                </div>
                <div class="middle aligned column">
                    <div class="ui header">Don't have an account?<br>
                        <a href="/signup.html">
                            <div class="ui big button">
                                <i class="signup icon"></i>
                                Sign Up
                            </div>
                        </a>
                    </div>
                </div>
            </div>

        </div>
    </div>


    <!--Will need to get rid of this-->
    <!--Sign in end-->

</div>
<!--jquery should be above semantic because of dependencies-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.10/semantic.min.js"></script>
<script src="webpageFun.js"></script>

<nav id="nav-placeholder">


</nav>

<div class="ui fluid container">
    <div class="content">
        <div class="transparent-bg">
            <img src="Blood-Donation.jpg" id="bdimg" style="width:100%; background-size: cover;">
        </div>
        <div class="ui container">
            <div class="centered">
                <div class="mainContainer" id="mainContainer" style="display: block">
                    <div class="ui inverted blue segment" id="logoutLabel" style="display: none">
                        <p>you have successfully been logged out</p>
                    </div>
                    <h1 style="font-size:4vw;">Donate Blood To Save Life</h1>

                    <iframe width="728" height="409" src="https://www.youtube.com/embed/qEo2wrYyCRI"
                            frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope;
                          picture-in-picture" allowfullscreen>
                    </iframe>
                    <br>
                    **click the "YouTube" link in the video player for higher resolution video**

                    <br>
                    <br>
                    <div class="ui container">
                        <a href="/signup.html">
                            <button class="ui large red button" id="Register">Register now</button>
                        </a>
                        <button class="ui large basic inverted button" id="Search" onclick="tempButton()">Search for
                            blood
                        </button>
                    </div>
                </div>

                <div class="loginContainer" id="loginContainer" style="display: none">
                    <div class="ui placeholder segment" id="fogCover" style="background: rgba(0,0,0,.7);">
                        <h2>Login</h2>
                        <form class="ui form" method="post" action="/">
                            <label style="text-align: left;">Email</label>
                            <input type="text" name="username" placeholder="email"/>
                            <label style="text-align: left;">Password</label>
                            <input type="password" placeholder="password" name="password"/>
                            <input type="submit"/>
                        </form>
                        <div class="ui inverted green segment" id="confirm" style="display: none">
                            <p>you have successfully been logged in</p>
                        </div>
                        <div class="ui inverted red segment" id="deny">
                            <p>Wrong Email or password</p>
                        </div>
                        <hr>
                        <div class="ui inverted header">Don't have an account?<br>
                            <a href="/signup.html">
                                <div class="ui big button">
                                    <i class="signup icon"></i>
                                    Sign Up
                                </div>
                            </a>
                        </div>
                    </div>
                </div>


            </div>

        </div>

    </div>

</div>
<script>
      loadNav();
      loginCheck();
      checkCookie();

      $(document).ready(function() {
    $.get("/loginStatus", function(data, status) {
      let isAdmin = false;

      for (i in data.roles) {
        if (data.roles[i] == "ADMIN") {
          isAdmin = true;
        }
      }

      if (isAdmin == true) {
        document.getElementById("manageUsersNavButton").style.display = "block";
      }

    });

  });

</script>
</body>


<div class="footer">

</div>
</html>
